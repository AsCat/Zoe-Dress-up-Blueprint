var Option=function(a,b,c,d){Kiwi.GameObjects.Sprite.call(this,a,b,c,d)};Kiwi.extend(Option,Kiwi.GameObjects.Sprite),Option.prototype.reset=function(){this.cellIndex=0},Option.prototype.next=function(){this.animation.nextFrame()},Option.prototype.prev=function(){this.animation.prevFrame()},Option.prototype.randomize=function(){this.cellIndex=this.game.rnd.integerInRange(0,this.animation.length)};var Play=function(a){Kiwi.State.call(this,a)};Kiwi.extend(Play,Kiwi.State),Play.prototype.preload=function(){this.createLoader()},Play.prototype.createLoader=function(){this.spinnerBackground=new Kiwi.GameObjects.StaticImage(this,this.textures.spinnerBackground),this.addChild(this.spinnerBackground),this.spinner=new Kiwi.GameObjects.StaticImage(this,this.textures.spinner),this.addChild(this.spinner),this.spinnerBackground.x=.5*(this.game.stage.width-this.spinnerBackground.width),this.spinner.x=.5*(this.game.stage.width-this.spinner.width),this.spinnerBackground.y=.5*(this.game.stage.height-this.spinnerBackground.height),this.spinner.y=.5*(this.game.stage.height-this.spinner.height)},Play.prototype.loadUpdate=function(){this.game.frame%15==0&&(this.spinner.rotation+=Math.PI/6)},Play.prototype.removeLoader=function(){this.spinnerBackground.visible=!1,this.spinner.visible=!1,this.spinnerBackground.exists=!1,this.spinner.exists=!1,this.spinnerBackground=null,this.spinner=null},Play.prototype.loadComplete=function(){this.removeLoader()},Play.prototype.create=function(){this.createDressup(),this.createCustomButtons(),this.createSaveButtons()},Play.prototype.createDressup=function(){},Play.prototype.createCustomButtons=function(){this.randomButton=new Kiwi.GameObjects.Sprite(this,this.textures.randomBtn,0,289),this.addChild(this.randomButton),this.randomButton.input.onUp.add(this.randomizeCharacter,this),this.resetButton=new Kiwi.GameObjects.Sprite(this,this.textures.resetBtn,118,289),this.addChild(this.resetButton),this.resetButton.input.onUp.add(this.resetCharacter,this),this.showButton=new Kiwi.GameObjects.Sprite(this,this.textures.cameraBtn,235,289),this.addChild(this.showButton),this.showButton.input.onUp.add(this.showSaveButtons,this)},Play.prototype.createSaveButtons=function(){this.printButton=new Kiwi.GameObjects.Sprite(this,this.textures.printBtn,0,289),this.printButton.visible=!1,this.printButton.active=!1,this.addChild(this.printButton),this.saveButton=new Kiwi.GameObjects.Sprite(this,this.textures.saveBtn,118,289),this.saveButton.visible=!1,this.saveButton.active=!1,this.addChild(this.saveButton),this.backButton=new Kiwi.GameObjects.Sprite(this,this.textures.backBtn,235,289),this.backButton.visible=!1,this.backButton.active=!1,this.addChild(this.backButton),this.backButton.input.onUp.add(this.showCreateButtons,this),this.game.input.onUp.add(this.checkInputs,this)},Play.prototype.showCreateButtons=function(){this.randomButton.active=!0,this.randomButton.visible=!0,this.resetButton.active=!0,this.resetButton.visible=!0,this.showButton.active=!0,this.showButton.visible=!0,this.printButton.visible=!1,this.printButton.active=!1,this.saveButton.visible=!1,this.saveButton.active=!1,this.backButton.visible=!1,this.backButton.active=!1;for(var a=this.buttons.length;a--;)this.buttons[a].visible=!0},Play.prototype.showSaveButtons=function(){this.randomButton.active=!1,this.randomButton.visible=!1,this.resetButton.active=!1,this.resetButton.visible=!1,this.showButton.active=!1,this.showButton.visible=!1,this.printButton.visible=!0,this.printButton.active=!0,this.saveButton.visible=!0,this.saveButton.active=!0,this.backButton.visible=!0,this.backButton.active=!0;for(var a=this.buttons.length;a--;)this.buttons[a].visible=!1},Play.prototype.randomizeCharacter=function(){for(var a=0;a<this.dressUpElements.length;a++)this.dressUpElements[a].randomize()},Play.prototype.resetCharacter=function(){for(var a=0;a<this.dressUpElements.length;a++)this.dressUpElements[a].reset()},Play.prototype.print=function(){this.printButton.visible=!1,this.saveButton.visible=!1,this.backButton.visible=!1,this.game.cameras.render();var a=this.game.stage.canvas.toDataURL(),b="<!DOCTYPE html>";b+="<html>",b+="<head><title>Your Dress Up</title></head>",b+="<body>",b+='<img src="'+a+'">',b+="</body>",b+="</html>";var c=window.open("","","width=1280,height=960");c.document.open(),c.document.write(b),c.document.close(),c.focus(),c.print(),c.close(),this.printButton.visible=!0,this.saveButton.visible=!0,this.backButton.visible=!0},Play.prototype.save=function(){this.printButton.visible=!1,this.saveButton.visible=!1,this.backButton.visible=!1,this.game.cameras.render();var a=this.game.stage.canvas.toDataURL("image/octet-stream");window.open(a,"toDataURL() image","width=1280, height=960"),this.printButton.visible=!0,this.saveButton.visible=!0,this.backButton.visible=!0},Play.prototype.checkInputs=function(a,b){return this.printButton.active&&this.printButton.box.hitbox.contains(a,b)?void this.print():this.saveButton.active&&this.saveButton.box.hitbox.contains(a,b)?void this.save():void 0},Play.prototype.shutDown=function(){this.game.input.onUp.remove(this.checkInputs,this),this.printButton=null,this.saveButton=null,this.backButton=null,this.randomButton=null,this.showButton=null,this.resetButton=null,this.buttons=null,this.dressUpElements=null};var Dog=new Play("Dog");Dog.preload=function(){this.addImage("bg","assets/img/character/dog/bg.png",!1),this.addImage("face","assets/img/character/dog/face.png",!1),this.addSpriteSheet("eyebrows","assets/img/character/dog/eyebrows.png",387,472,!1),this.addSpriteSheet("eyes","assets/img/character/dog/eyes.png",406,536,!1),this.addSpriteSheet("mouth","assets/img/character/dog/mouth.png",425,727,!1),this.addImage("base","assets/img/character/dog/outfit/base.png",!1),Play.prototype.preload.call(this)},Dog.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures.bg,0,0),this.addChild(this.background)};var Dude=new Play("Dude");Dude.preload=function(){this.addImage("bg","assets/img/character/dude/bg.png",!1),this.addImage("face","assets/img/character/dude/face.png",!1),this.addSpriteSheet("eyebrows","assets/img/character/dude/eyebrows.png",488,260,!1),this.addSpriteSheet("eyes","assets/img/character/dude/eyes.png",491,290,!1),this.addSpriteSheet("mouth","assets/img/character/dude/mouth.png",491,377,!1),this.addImage("base","assets/img/character/dude/outfit/base.png",!1),this.addImage("outfit-1","assets/img/character/dude/outfit/0.png",!1),Play.prototype.preload.call(this)},Dude.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures.bg,0,0),this.addChild(this.background)};var MainLoader=new KiwiLoadingScreen("MainLoader","MainMenu","assets/img/loading/");MainLoader.preload=function(){KiwiLoadingScreen.prototype.preload.call(this),this.addSpriteSheet("cameraBtn","assets/img/buttons/cameraBtn.png",100,100),this.addSpriteSheet("randomBtn","assets/img/buttons/randomBtn.png",100,100),this.addSpriteSheet("resetBtn","assets/img/buttons/resetBtn.png",100,100),this.addSpriteSheet("nextBtn","assets/img/buttons/nextBtn.png",63,63),this.addSpriteSheet("prevBtn","assets/img/buttons/prevBtn.png",63,63),this.addSpriteSheet("backBtn","assets/img/buttons/backBtn.png",100,100),this.addSpriteSheet("printBtn","assets/img/buttons/printBtn.png",100,100),this.addSpriteSheet("saveBtn","assets/img/buttons/saveBtn.png",100,100),this.addSpriteSheet("eyebrows","assets/img/buttons/eyebrowsBtn.png",101,101),this.addSpriteSheet("eyes","assets/img/buttons/eyesBtn.png",101,101),this.addSpriteSheet("glasses","assets/img/buttons/glassesBtn.png",101,101),this.addSpriteSheet("hair","assets/img/buttons/hairBtn.png",101,101),this.addSpriteSheet("mouth","assets/img/buttons/mouthBtn.png",101,101),this.addSpriteSheet("nose","assets/img/buttons/noseBtn.png",101,101),this.addImage("menu","assets/img/menu/start.png"),this.addImage("spinnerBackground","assets/img/spinner/spinnerSquare.png"),this.addImage("spinner","assets/img/spinner/spinner.png")};var MainMenu=new Kiwi.State("MainMenu");MainMenu.create=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures.menu,0,0),this.addChild(this.background),this.game.input.onUp.addOnce(this.startGame,this)},MainMenu.startGame=function(){this.game.stage.color="fff",this.game.states.switchState("Play")};var Zoe=new Play("Zoe");Zoe.preload=function(){this.addImage("bg","assets/img/character/zoe/bg.png",!1),this.addImage("face","assets/img/character/zoe/face.png",!1),this.addSpriteSheet("eyebrows","assets/img/character/zoe/eyebrows.png",447,283,!1),this.addSpriteSheet("eyes","assets/img/character/zoe/eyes.png",481,304,!1),this.addSpriteSheet("glasses","assets/img/character/zoe/glasses.png",510,320,!1),this.addSpriteSheet("hair","assets/img/character/zoe/hair.png",600,377,!1),this.addSpriteSheet("mouth","assets/img/character/zoe/mouth.png",75,52,!1),this.addSpriteSheet("nose","assets/img/character/zoe/nose.png",431,351,!1),this.addImage("base","assets/img/character/zoe/outfit/base.png",!1),this.addImage("outfit-1","assets/img/character/zoe/outfit/0.png",!1),this.addImage("outfit-2","assets/img/character/zoe/outfit/1.png",!1),this.addImage("outfit-3","assets/img/character/zoe/outfit/2.png",!1),this.addImage("outfit-4","assets/img/character/zoe/outfit/3.png",!1),this.addImage("outfit-5","assets/img/character/zoe/outfit/4.png",!1),Play.prototype.preload.call(this)},Zoe.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures.bg,0,0),this.addChild(this.background),this.dressUpElements=[],this.buttons=[]};var ZoeFriend=new Play("ZoeFriend");ZoeFriend.preload=function(){this.addImage("bg","assets/img/character/zoefriend/bg.png",!1),this.addImage("face","assets/img/character/zoefriend/face.png",!1),this.addSpriteSheet("eyebrows","assets/img/character/zoefriend/eyebrows.png",524,338,!1),this.addSpriteSheet("eyes","assets/img/character/zoefriend/eyes.png",177,77,!1),this.addSpriteSheet("hair-1","assets/img/character/zoefriend/hair-1.png",631,522,!1),this.addSpriteSheet("hair-2","assets/img/character/zoefriend/hair-2.png",631,522,!1),this.addSpriteSheet("mouth","assets/img/character/zoefriend/mouth.png",102,65,!1),this.addSpriteSheet("nose","assets/img/character/zoefriend/nose.png",443,418,!1),this.addImage("outfit-1","assets/img/character/zoefriend/outfit/0.png",!1),this.addImage("outfit-2","assets/img/character/zoefriend/outfit/1.png",!1),this.addImage("outfit-3","assets/img/character/zoefriend/outfit/2.png",!1),Play.prototype.preload.call(this)},ZoeFriend.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures.bg,0,0),this.addChild(this.background)};var gameoptions={width:768,height:1024},game=new Kiwi.Game("content","ZoeDressup",null,gameoptions);game.states.addState(MainLoader),game.states.addState(MainMenu),game.states.addState(Zoe),game.states.addState(Dog),game.states.addState(Dude),game.states.addState(ZoeFriend),game.states.switchState("MainLoader");